# ç¶­åŸºç™¾ç§‘äººç‰©åŒ¹é…å„ªåŒ–è¨ˆç•«

## å•é¡Œæè¿°

ç›®å‰ HotTea åœ¨é€²è¡Œç¶­åŸºç™¾ç§‘äººç‰©åŒ¹é…æ™‚ï¼Œé¢è‡¨**åŒåäººç‰©èª¤é…å°**çš„å•é¡Œï¼š

- æ–°èä¸­çš„è¼ƒä¸çŸ¥åäººç‰©å¯èƒ½è¢«é…å°åˆ°ç¶­åŸºç™¾ç§‘ä¸Šçš„çŸ¥ååŒåäººç‰©
- é€ æˆé¡¯ç¤ºéŒ¯èª¤çš„é ­åƒå’Œè³‡è¨Š
- å½±éŸ¿ç”¨æˆ¶é«”é©—çš„æº–ç¢ºæ€§

### å…·é«”æƒ…å¢ƒç¤ºä¾‹
```
æ–°èå…§å®¹ï¼šã€Œå°ç©é›»å·¥ç¨‹å¸«æå°æ˜ç²å¾—å‰µæ–°çã€
ç¶­åŸºæœå°‹çµæœï¼šã€Œæå°æ˜ï¼ˆæ­Œæ‰‹ï¼‰ã€
å•é¡Œï¼šé¡¯ç¤ºæ­Œæ‰‹ç…§ç‰‡çµ¦å·¥ç¨‹å¸«ï¼Œé€ æˆèª¤å°
```

## æ ¹æœ¬åŸå› åˆ†æ

### 1. ç¶­åŸºç™¾ç§‘ API æœå°‹æ©Ÿåˆ¶
- OpenSearch API æœƒå„ªå…ˆè¿”å›**æœ€çŸ¥å**çš„åŒåäººç‰©
- æ’åºåŸºæ–¼é é¢æ¬Šé‡ï¼ˆPageRankï¼‰ã€ç€è¦½é‡ã€å…¥éˆæ•¸é‡
- ç¼ºä¹ä¸Šä¸‹æ–‡ç†è§£èƒ½åŠ›

### 2. æˆ‘å€‘ç›®å‰çš„åŒ¹é…é‚è¼¯
```javascript
// ç›®å‰éæ–¼ç°¡å–®çš„åŒ¹é…é‚è¼¯
if (zhTitle && !zhTitle.includes('æ¶ˆæ­§ç¾©')) {
  return { title: zhTitle, lang: 'zh' };
}
```

### 3. å®¹æ˜“èª¤é…çš„äººç‰©é¡å‹
- **åœ°æ–¹æ€§äººç‰©**ï¼šåœ°æ–¹æ”¿æ²»äººç‰©ã€ä¼æ¥­ä¸»ç®¡
- **å°ˆæ¥­é ˜åŸŸäººç‰©**ï¼šå·¥ç¨‹å¸«ã€é†«å¸«ã€å­¸è€…
- **æ–°èˆˆäººç‰©**ï¼šè¿‘æœŸå´›èµ·ã€å°šæœªæœ‰ç¶­åŸºæ¢ç›®
- **åŒåæ©Ÿç‡é«˜çš„å§“å**ï¼šæå°æ˜ã€ç‹å¤§åŒç­‰å¸¸è¦‹åå­—

## å„ªåŒ–ç­–ç•¥è¦åŠƒ

### ç­–ç•¥Aï¼šä¸Šä¸‹æ–‡åŒ¹é…ç³»çµ± ğŸ¯ **å„ªå…ˆå¯¦ä½œ**

#### å¯¦ä½œæ¦‚å¿µ
```javascript
// å¾æ–°èå…§å®¹æå–ä¸Šä¸‹æ–‡ç·šç´¢
const contextHints = extractContextFromNews(newsContent);
// ä¾‹å¦‚ï¼š{ profession: "å·¥ç¨‹å¸«", company: "å°ç©é›»", event: "å‰µæ–°ç" }

// åœ¨ç¶­åŸºç™¾ç§‘é©—è­‰æ™‚æª¢æŸ¥ç›¸é—œæ€§
const relevanceScore = calculateRelevance(wikiContent, contextHints);
```

#### å…·é«”åšæ³•
1. **é—œéµè©æå–**ï¼šå¾æ–°èå…§å®¹è­˜åˆ¥è·æ¥­ã€æ©Ÿæ§‹ã€äº‹ä»¶
2. **ç¶­åŸºå…§å®¹æ¯”å°**ï¼šæª¢æŸ¥ç¶­åŸºæ¢ç›®æ˜¯å¦åŒ…å«ç›¸é—œè³‡è¨Š
3. **ç›¸é—œæ€§è©•åˆ†**ï¼šè¨ˆç®—åŒ¹é…çš„å¯ä¿¡åº¦

#### é æœŸæ•ˆæœ
- å¤§å¹…é™ä½èª¤é…ç‡
- æå‡åŒ¹é…æº–ç¢ºæ€§
- ä¿æŒè‰¯å¥½çš„æ€§èƒ½è¡¨ç¾

### ç­–ç•¥Bï¼šä¿¡å¿ƒåˆ†æ•¸æ©Ÿåˆ¶ ğŸ¯ **å„ªå…ˆå¯¦ä½œ**

#### è©•åˆ†æ¨™æº–
```javascript
const confidenceScores = {
  exactMatch: 0.9,           // å®Œå…¨åŒ¹é…ï¼ˆå§“å+ä¸Šä¸‹æ–‡ï¼‰
  contextMatch: 0.7,         // ä¸Šä¸‹æ–‡éƒ¨åˆ†åŒ¹é…
  professionMatch: 0.6,      // è·æ¥­åŒ¹é…
  nameOnly: 0.3,             // åƒ…å§“ååŒ¹é…
  threshold: 0.6             // é¡¯ç¤ºé–€æª»
};
```

#### é¡¯ç¤ºé‚è¼¯
```javascript
if (confidenceScore >= threshold) {
  showAvatar(wikipediaResult);
} else {
  showEmojiAvatar(); // ä½¿ç”¨é è¨­ emoji
}
```

### ç­–ç•¥Cï¼šæ¶ˆæ­§ç¾©é é¢æ™ºèƒ½è™•ç† ğŸ“… **ä¸­æœŸå¯¦ä½œ**

#### ç›®æ¨™
- ä¸»å‹•è™•ç†ç¶­åŸºç™¾ç§‘æ¶ˆæ­§ç¾©é é¢
- å¾å¤šå€‹åŒåäººç‰©ä¸­é¸æ“‡æœ€ç›¸é—œçš„æ¢ç›®
- é¿å…ç›´æ¥è·³éæ¶ˆæ­§ç¾©é é¢

#### å¯¦ä½œè¦é»
```javascript
// æª¢æ¸¬åˆ°æ¶ˆæ­§ç¾©é é¢æ™‚
if (isDisambiguationPage(title)) {
  const candidates = extractDisambiguationList(wikiContent);
  const bestMatch = selectBestCandidate(candidates, contextHints);
  return bestMatch;
}
```

### ç­–ç•¥Dï¼šå¤šé‡é©—è­‰ç³»çµ± ğŸ“… **ä¸­æœŸå¯¦ä½œ**

#### é©—è­‰ç¶­åº¦
1. **æ™‚é–“é©—è­‰**ï¼šæª¢æŸ¥äººç‰©æ´»èºæ™‚æœŸèˆ‡æ–°èæ™‚é–“çš„åˆç†æ€§
2. **åœ°ç†é©—è­‰**ï¼šæ¯”å°äººç‰©æ´»å‹•åœ°å€èˆ‡æ–°èç™¼ç”Ÿåœ°
3. **è·æ¥­é©—è­‰**ï¼šç¢ºèªç¶­åŸºæ¢ç›®è·æ¥­èˆ‡æ–°èæåŠè·æ¥­çš„ä¸€è‡´æ€§
4. **æ©Ÿæ§‹é©—è­‰**ï¼šæª¢æŸ¥æ‰€å±¬æ©Ÿæ§‹çš„åŒ¹é…åº¦

### ç­–ç•¥Eï¼šæ©Ÿå™¨å­¸ç¿’è¼”åŠ© ğŸ”® **é•·æœŸè¦åŠƒ**

#### å¯èƒ½æ–¹å‘
- è¨“ç·´æ–‡æœ¬ç›¸ä¼¼åº¦æ¨¡å‹
- å»ºç«‹äººç‰©å¯¦é«”è­˜åˆ¥ç³»çµ±
- åˆ©ç”¨çŸ¥è­˜åœ–è­œé€²è¡Œé—œè¯åˆ†æ

## å¯¦ä½œå„ªå…ˆç´š

### Phase 1: ç«‹å³æ”¹å–„ (v5.8.0)
- [ ] å¯¦ä½œä¸Šä¸‹æ–‡é—œéµè©æå–
- [ ] å»ºç«‹ä¿¡å¿ƒåˆ†æ•¸è©•ä¼°æ©Ÿåˆ¶
- [ ] è¨­å®šé¡¯ç¤ºé–€æª»ï¼Œé¿å…ä½ä¿¡å¿ƒåŒ¹é…

### Phase 2: æ ¸å¿ƒå„ªåŒ– (v5.9.0)
- [ ] æ¶ˆæ­§ç¾©é é¢æ™ºèƒ½é¸æ“‡
- [ ] å¤šé‡é©—è­‰ç³»çµ±
- [ ] ç”¨æˆ¶å›é¥‹æ©Ÿåˆ¶ï¼ˆèª¤é…å ±å‘Šï¼‰

### Phase 3: é€²éšåŠŸèƒ½ (v6.0.0)
- [ ] æ©Ÿå™¨å­¸ç¿’æ¨¡å‹æ•´åˆ
- [ ] å‹•æ…‹å­¸ç¿’ç”¨æˆ¶åå¥½
- [ ] å»ºç«‹æœ¬åœ°åŒ–äººç‰©è³‡æ–™åº«

## æ€§èƒ½è€ƒé‡

### å¹³è¡¡é»åˆ†æ
```
æº–ç¢ºæ€§ â†‘ vs è¦†è“‹ç‡ â†“
æ€§èƒ½ â†“ vs ç²¾ç¢ºåº¦ â†‘
è¤‡é›œåº¦ â†‘ vs ç¶­è­·æ€§ â†“
```

### æ•ˆèƒ½å„ªåŒ–ç­–ç•¥
- ä½¿ç”¨ç·©å­˜æ¸›å°‘é‡è¤‡è¨ˆç®—
- ç•°æ­¥è™•ç†ï¼Œé¿å…é˜»å¡ä¸»æµç¨‹
- è¨­å®šåˆç†çš„è¶…æ™‚æ™‚é–“

## è©•ä¼°æŒ‡æ¨™

### é‡åŒ–æŒ‡æ¨™
- **åŒ¹é…æº–ç¢ºç‡**ï¼šæ­£ç¢ºåŒ¹é… / ç¸½åŒ¹é…æ•¸
- **è¦†è“‹ç‡**ï¼šæœ‰é ­åƒé¡¯ç¤º / ç¸½äººç‰©æ•¸
- **éŸ¿æ‡‰æ™‚é–“**ï¼šé ­åƒè¼‰å…¥æ™‚é–“
- **ç”¨æˆ¶æ»¿æ„åº¦**ï¼šåŸºæ–¼å›é¥‹çš„è©•åˆ†

### æ¸¬è©¦æ¡ˆä¾‹
å»ºç«‹æ¨™æº–æ¸¬è©¦é›†ï¼š
- 50å€‹å¸¸è¦‹å§“åçš„æ–°èæ¡ˆä¾‹
- åŒ…å«å„ç¨®è·æ¥­ã€åœ°å€çš„äººç‰©
- å·²çŸ¥æ­£ç¢ºç­”æ¡ˆçš„å°ç…§çµ„

## å¯¦ä½œç´°ç¯€å‚™å¿˜

### é—œéµä»£ç¢¼ä½ç½®
- `src/wikipedia-avatar.js` - ä¸»è¦åŒ¹é…é‚è¼¯
- `findBestWikipediaMatch()` - æ ¸å¿ƒæœå°‹æ–¹æ³•
- `getPersonInfo()` - äººç‰©è³‡è¨Šç²å–

### éœ€è¦æ–°å¢çš„å‡½æ•¸
```javascript
extractContextFromNews(newsContent)     // ä¸Šä¸‹æ–‡æå–
calculateRelevanceScore(wiki, context)  // ç›¸é—œæ€§è¨ˆç®—
isDisambiguationPage(title)             // æ¶ˆæ­§ç¾©é é¢æª¢æ¸¬
selectBestCandidate(candidates, hints)  // æœ€ä½³å€™é¸é¸æ“‡
```

### é…ç½®åƒæ•¸
```javascript
const MATCHING_CONFIG = {
  confidenceThreshold: 0.6,
  contextWeight: 0.4,
  professionWeight: 0.3,
  timeWeight: 0.2,
  locationWeight: 0.1
};
```

## ç›¸é—œè³‡æº

### ç¶­åŸºç™¾ç§‘ API æ–‡æª”
- [OpenSearch API](https://www.mediawiki.org/wiki/API:Opensearch)
- [Query API](https://www.mediawiki.org/wiki/API:Query)
- [æ¶ˆæ­§ç¾©é é¢çµæ§‹](https://zh.wikipedia.org/wiki/Wikipedia:æ¶ˆæ­§ç¾©)

### å¯åƒè€ƒçš„é–‹æºé …ç›®
- [Wikidata Entity Linking](https://github.com/wikimedia/wikidata)
- [DBpedia Spotlight](https://github.com/dbpedia-spotlight/dbpedia-spotlight)

---

**æœ€å¾Œæ›´æ–°**ï¼š2024-12-26
**è² è²¬äºº**ï¼šHotTea é–‹ç™¼åœ˜éšŠ
**ç‹€æ…‹**ï¼šè¦åŠƒä¸­ï¼Œå¾…å¯¦ä½œ